let whitespaceCount=1, total_characters=0, time=60, counter_start;let lblWord=0, lblChars=0, lblWpm=0, lblAccuracy=0, lblErrors=0;let texts=[], givenTexts=[];let txtarea=document.querySelector("#txtarea"), startBtn=document.querySelector("#start");let words=document.querySelector("#words"), characters=document.querySelector("#characters");let wordsperminute=document.querySelector("#wpm"), lblTime=document.querySelector("#time");let complete=document.querySelector("#testComplete"), follow=document.querySelector("#follow");let cError=document.querySelector("#cErrors"), accuracy=document.querySelector("#accuracy");let text="pause unite issue limit hurry strip trade plead fancy sound knock twist speed value agree solve guess alter marry abuse boast sweep drain sense creep smile cheer check frown cause press award spill carry trust apply write argue taste treat weigh relax occur elect shake carve watch grant alert build force frown write hurry spare tempt burst house abuse stick shrug widen drink incur state creep allow alter enjoy place upset match brush share crack drive flood leave sound seize mount unite range elect pause adapt begin blame avoid chase knock build breed lower speak sense close laugh focus visit";(function (){follow.append(text);})();function updateWord(){let x=txtarea.value; let newline_count=0; for(let i=0; i < x.length; i++){if(x.charAt(i)==" ") whitespaceCount++; else total_characters++; if(x.charAt(i)=="\n" || x.charAt(i)=="\r") newline_count++;}words.innerText=`${lblWord=whitespaceCount + (newline_count/2)}`; characters.innerText=`${lblChars=total_characters}`; wordsperminute.innerText=`${lblWpm=Math.round(((total_characters/5) - lblErrors)/1)}`; accuracy.innerText=`${lblAccuracy=(((total_characters - lblErrors) / total_characters) * 100).toFixed(2)}`; cError.innerText=`${lblErrors}`; whitespaceCount=1; total_characters=0;}function getErrors(){extractTextArea(); extractGiven(); for(let k=0; k < texts.length; k++){if(texts[k] !=givenTexts[k]) lblErrors++;}}function extractTextArea(){let lines=$(txtarea).val().split(/\s/); for(let i=0; i < lines.length; i++){if(/\S/.test(lines[i])) texts.push($.trim(lines[i]));}}function extractGiven(){let givenText=text.split(/\s/); for(let j=0; j < givenText.length; j++){if(/\S/.test(givenText[j])) givenTexts.push($.trim(givenText[j]));}}function timer(){if(time==-1){time=60; clearInterval(counter_start); txtarea.disabled=true; getErrors(); updateWord(); complete.innerText=`Test Complete!`; lblTime.setAttribute("class","fw-bold h6 dark-mode-color-1");}if(time < 6) lblTime.setAttribute("class","fw-bold h6 text-danger"); lblTime.innerText=`${time--}s`;}function start(){counter_start=setInterval(timer,1000); startBtn.disabled=true; txtarea.disabled=false; txtarea.focus(); txtarea.select();}function reset(){txtarea.value=""; startBtn.disabled=false; txtarea.disabled=true; clearInterval(counter_start); words.innerText=`${count=0}`; characters.innerText=`${total_characters=0}`; wordsperminute.innerText=`${wpm=0}`; lblTime.innerText=`${time=60}s`; lblTime.setAttribute("class","fw-bold h6 dark-mode-color-1"); complete.innerText=``;}txtarea.addEventListener('keypress', (e)=>{if(e.key=="Enter") event.preventDefault(); updateWord();});
